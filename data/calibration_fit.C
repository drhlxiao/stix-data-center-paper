void calibration_fit()
{
	//calibration run 1300 /data/calibation/calibration_run1300.root
//=========Macro generated from canvas: Canvas_1/Canvas_1
//=========  (Tue Feb  8 13:26:13 2022) by ROOT version 6.22/08
   TCanvas *Canvas_1 = new TCanvas("Canvas_1", "Canvas_1",400,300);
   gStyle->SetOptStat(0);
   gStyle->SetOptTitle(0);
   Canvas_1->Range(254.7727,0.7262184,452.0718,4.216119);
   Canvas_1->SetFillColor(10);
   Canvas_1->SetBorderMode(0);
   Canvas_1->SetBorderSize(2);
   //Canvas_1->SetLogy();
   Canvas_1->SetTickx(1);
   Canvas_1->SetTicky(1);
   Canvas_1->SetBottomMargin(0.1515957);
   Canvas_1->SetFrameFillColor(0);
   Canvas_1->SetFrameBorderMode(0);
   Canvas_1->SetFrameLineWidth(3);
   
   Double_t Graph0_fx1[195] = {
   252.0886,
   253.4497,
   254.2664,
   255.083,
   256.4441,
   257.2607,
   258.3496,
   259.1663,
   260.2551,
   261.344,
   262.1606,
   263.5217,
   264.3384,
   265.4272,
   266.2439,
   267.3327,
   268.4216,
   269.2383,
   270.3271,
   271.416,
   272.2326,
   273.3215,
   274.4104,
   275.4992,
   276.3159,
   277.1325,
   278.4936,
   279.3103,
   280.3991,
   281.488,
   282.3046,
   283.3935,
   284.2102,
   285.5712,
   286.3879,
   287.4767,
   288.5656,
   289.3823,
   290.4711,
   291.2878,
   292.6489,
   293.4655,
   294.2822,
   295.6432,
   296.4599,
   297.5487,
   298.3654,
   299.4543,
   300.5431,
   301.3598,
   302.7209,
   303.5375,
   304.6264,
   305.443,
   306.5319,
   307.6207,
   308.4374,
   309.5263,
   310.6151,
   311.4318,
   312.5206,
   313.6095,
   314.6984,
   315.515,
   316.6039,
   317.6927,
   318.5094,
   319.5983,
   320.6871,
   321.5038,
   322.5926,
   323.4093,
   324.7704,
   325.587,
   326.6759,
   327.7647,
   328.5814,
   329.6703,
   330.4869,
   331.848,
   332.6646,
   333.4813,
   334.8424,
   335.659,
   336.7479,
   337.5645,
   338.6534,
   339.7423,
   340.5589,
   341.92,
   342.7366,
   343.8255,
   344.6422,
   345.731,
   346.8199,
   347.6365,
   348.7254,
   349.8143,
   350.6309,
   351.7198,
   352.8086,
   353.8975,
   354.7142,
   355.803,
   356.8919,
   357.7085,
   358.7974,
   359.8863,
   360.7029,
   361.7918,
   362.6084,
   363.9695,
   364.7862,
   365.875,
   366.9639,
   367.7805,
   368.8694,
   369.686,
   371.0471,
   371.8638,
   372.6804,
   374.0415,
   374.8582,
   375.947,
   376.7637,
   377.8525,
   378.9414,
   379.758,
   380.8469,
   381.9358,
   383.0246,
   383.8413,
   384.9302,
   386.019,
   386.8357,
   387.9245,
   389.0134,
   389.8301,
   390.9189,
   392.0078,
   393.0966,
   393.9133,
   395.0022,
   396.091,
   396.9077,
   397.9965,
   399.0854,
   399.9021,
   400.9909,
   401.8076,
   403.1686,
   403.9853,
   405.0742,
   406.163,
   406.9797,
   408.0685,
   408.8852,
   410.2463,
   411.0629,
   411.8796,
   412.9684,
   414.0573,
   415.1462,
   415.9628,
   417.0517,
   418.1405,
   418.9572,
   420.0461,
   421.1349,
   422.2238,
   423.0404,
   424.1293,
   425.2182,
   426.0348,
   427.1237,
   428.2125,
   429.0292,
   430.1181,
   431.2069,
   432.2958,
   433.1124,
   434.2013,
   435.2902,
   436.1068,
   437.1957,
   438.2845,
   439.1012,
   440.1901,
   441.0067,
   442.3678,
   443.1844,
   444.2733,
   445.3622,
   446.1788,
   447.2677};
   Double_t Graph0_fy1[195] = {
   281.1207,
   199.7038,
   94.52107,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   53.07916,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   74.7189,
   94.52107,
   94.52107,
   135.9304,
   117.0429,
   117.0429,
   94.52107,
   117.0429,
   94.52107,
   117.0429,
   157.8659,
   157.8659,
   157.8659,
   199.7038,
   281.1207,
   306.21,
   326.4859,
   431.0482,
   569.0983,
   991.9967,
   2141.163,
   4523.842,
   6789.829,
   5034.029,
   1587.474,
   263.6622,
   135.9304,
   135.9304,
   179.4643,
   281.1207,
   633.2797,
   1202.389,
   1337.991,
   836.0977,
   404.2787,
   157.8659,
   53.07916,
   53.07916,
   32.46729,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   32.46729,
   53.07916,
   74.7189,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   53.07916,
   74.7189,
   74.7189,
   74.7189,
   94.52107,
   74.7189,
   94.52107,
   117.0429,
   157.8659,
   222.2259,
   242.059,
   179.4643,
   117.0429,
   117.0429,
   135.9304,
   94.52107,
   94.52107,
   117.0429,
   135.9304,
   157.8659,
   199.7038,
   222.2259,
   157.8659,
   135.9304,
   117.0429,
   94.52107,
   94.52107,
   74.7189,
   74.7189,
   94.52107,
   94.52107,
   74.7189,
   74.7189,
   74.7189,
   53.07916,
   53.07916,
   74.7189,
   74.7189,
   94.52107,
   94.52107,
   94.52107,
   94.52107,
   94.52107,
   94.52107,
   94.52107,
   94.52107,
   94.52107,
   117.0429,
   74.7189,
   94.52107,
   94.52107,
   94.52107,
   94.52107,
   94.52107,
   117.0429,
   135.9304,
   135.9304,
   117.0429,
   135.9304,
   135.9304,
   157.8659,
   199.7038,
   222.2259,
   222.2259,
   242.059,
   242.059,
   348.1042,
   363.306,
   431.0482,
   557.0647,
   633.2797,
   767.5919,
   1035.317,
   1282.006,
   1396.422,
   872.6103,
   281.1207,
   74.7189,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   53.07916,
   32.46729,
   32.46729,
   53.07916,
   32.46729,
   53.07916,
   32.46729,
   32.46729,
   32.46729,
   53.07916,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   53.07916,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729,
   32.46729};
   TGraph *graph = new TGraph(195,Graph0_fx1,Graph0_fy1);
   graph->SetName("Graph0");
   graph->SetTitle("Spectrum - detector 0 pixel 6 subspec 1");
   graph->SetLineWidth(3);
   
   TH1F *Graph_Graph01 = new TH1F("hexp","Spectrum - detector 0 pixel 6 subspec 1",195,233.0126,466.9824);
   Graph_Graph01->SetMinimum(18);
   Graph_Graph01->SetMaximum(7459.3);
   Graph_Graph01->SetDirectory(0);
   Graph_Graph01->SetStats(0);

   Int_t ci;      // for color index setting
   TColor *color; // for color definition with alpha
   ci = TColor::GetColor("#ff0000");
   Graph_Graph01->SetLineColor(ci);
   Graph_Graph01->SetLineWidth(3);
   Graph_Graph01->GetXaxis()->SetTitle("ADC channel");
   Graph_Graph01->GetXaxis()->SetRange(37,166);
   Graph_Graph01->GetXaxis()->CenterTitle(true);
   Graph_Graph01->GetXaxis()->SetLabelSize(0.05);
   Graph_Graph01->GetXaxis()->SetTitleSize(0.06);
   Graph_Graph01->GetXaxis()->SetTitleOffset(1);
   Graph_Graph01->GetYaxis()->SetTitle("Counts");
   Graph_Graph01->GetYaxis()->CenterTitle(true);
   Graph_Graph01->GetYaxis()->SetLabelOffset(0.01);
   Graph_Graph01->GetYaxis()->SetLabelSize(0.05);
   Graph_Graph01->GetYaxis()->SetTitleSize(0.06);
   Graph_Graph01->GetYaxis()->SetTitleOffset(1);
   Graph_Graph01->GetZaxis()->SetLabelSize(0.05);
   Graph_Graph01->GetZaxis()->SetTitleSize(0.06);
   Graph_Graph01->GetZaxis()->SetTitleOffset(1);
   graph->SetHistogram(Graph_Graph01);
   
   
   TF1 *fcrystal = new TF1("fcrystal","crystalball",402.309,427.309, TF1::EAddToList::kNo);
   fcrystal->SetFillColor(19);
   fcrystal->SetFillStyle(0);
   fcrystal->SetLineColor(2);
   fcrystal->SetLineWidth(2);
   fcrystal->SetChisquare(12722.96);
   fcrystal->SetNDF(19);
   fcrystal->GetXaxis()->SetLabelFont(42);
   fcrystal->GetXaxis()->SetTitleOffset(1);
   fcrystal->GetXaxis()->SetTitleFont(42);
   fcrystal->GetYaxis()->SetLabelFont(42);
   fcrystal->GetYaxis()->SetTitleFont(42);
   fcrystal->SetParameter(0,1419.579);
   fcrystal->SetParError(0,21.43563);
   fcrystal->SetParLimits(0,0,2750);
   fcrystal->SetParameter(1,412);
   fcrystal->SetParError(1,0.05645703);
   fcrystal->SetParLimits(1,402.309,432.309);
   fcrystal->SetParameter(2,1.28164);
   fcrystal->SetParError(2,0.04951224);
   fcrystal->SetParLimits(2,0,10);
   fcrystal->SetParameter(3,0.3329053);
   fcrystal->SetParError(3,0.03752766);
   fcrystal->SetParLimits(3,0,10);
   fcrystal->SetParameter(4,3.479547);
   fcrystal->SetParError(4,1.614606);
   fcrystal->SetParLimits(4,0,10);
   fcrystal->SetParent(graph);
   graph->GetListOfFunctions()->Add(fcrystal);
   
   TF1 *fdgaus = new TF1("dgaus","gaus(0)+gaus(3)",293.715,308.4547, TF1::EAddToList::kNo);
   fdgaus->SetFillColor(19);
   fdgaus->SetFillStyle(0);
   fdgaus->SetLineColor(2);
   fdgaus->SetLineWidth(3);
   fdgaus->SetChisquare(354606.8);
   fdgaus->SetNDF(9);
   fdgaus->GetXaxis()->SetLabelFont(42);
   fdgaus->GetXaxis()->SetTitleOffset(1);
   fdgaus->GetXaxis()->SetTitleFont(42);
   fdgaus->GetYaxis()->SetLabelFont(42);
   fdgaus->GetYaxis()->SetTitleFont(42);
   fdgaus->SetParameter(0,6710.584);
   fdgaus->SetParError(0,167.1471);
   fdgaus->SetParLimits(0,0,0);
   fdgaus->SetParameter(1,295.7357);
   fdgaus->SetParError(1,0.03540991);
   fdgaus->SetParLimits(1,0,0);
   fdgaus->SetParameter(2,1.230918);
   fdgaus->SetParError(2,0.03673355);
   fdgaus->SetParLimits(2,0,0);
   fdgaus->SetParameter(3,1301.734);
   fdgaus->SetParError(3,158.3368);
   fdgaus->SetParLimits(3,0,0);
   fdgaus->SetParameter(4,305.4452);
   fdgaus->SetParError(4,0.1997903);
   fdgaus->SetParLimits(4,0,0);
   fdgaus->SetParameter(5,1.476722);
   fdgaus->SetParError(5,0.2308729);
   fdgaus->SetParLimits(5,0,0);
   fdgaus->SetParent(graph);
   graph->GetListOfFunctions()->Add(fdgaus);
   graph->Draw("alp");
   
   TLegend *leg = new TLegend(0.4162304,0.6332378,0.7159686,0.8424069,NULL,"brNDC");
   leg->SetBorderSize(1);
   leg->SetLineColor(0);
   leg->SetLineStyle(1);
   leg->SetLineWidth(3);
   leg->SetFillColor(0);
   leg->SetFillStyle(1001);
   TLegendEntry *entry=leg->AddEntry("fdgaus","Best fit","l");
   entry->SetLineColor(kRed);
  // entry=leg->AddEntry("fcrystal","Crystal-ball fit","l");
  // entry->SetLineColor(kRed);
   entry=leg->AddEntry("hexp","Measurement","l");

   leg->Draw();
   Canvas_1->Modified();
   Canvas_1->cd();
   Canvas_1->SetSelected(Canvas_1);
   Canvas_1->ToggleToolBar();
}
